<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contactos</title>
 
    <!-- CSS de Bootstrap -->
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet" media="screen">

  </head>
  <body> 
    <!-- Librería jQuery requerida por los plugins de JavaScript -->
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
 
    <!-- Todos los plugins JavaScript de Bootstrap (también puedes
         incluir archivos JavaScript individuales de los únicos
         plugins que utilices) -->
    <script src="js/bootstrap.min.js"></script>
	
<script>
var req = new XMLHttpRequest();
	req.open('GET', document.location, false);
	req.send(null);
	var headers = req.getAllResponseHeaders().toLowerCase();
	//getLocation(headers);

function getLocation(string)
{
//var theURL = window.document.URL.toString(); 
var parser = document.createElement('a');
parser.href =string;	//theURL;
parser.href =string;	//theURL;

var prot = parser.protocol; // => "http:"
var hos = parser.host;     // => "example.com:3000"
var hostnam = parser.hostname; // => "example.com"
var por = parser.port;     // => "3000"
var pathnam = parser.pathname; // => "/pathname/"
var has = parser.hash;     // => "#hash"
var searc = parser.search;   // => "?search=test"

//document.write("</p>");
//document.write(prot);
//document.write("<p>");
//document.write(hos);
//document.write("</p>");
//document.write("<p>");
//document.write(hostnam);
//document.write("</p>");
//document.write("<p>");
//document.write(por);
//document.write("</p>");
//document.write("<p>");
//document.write(pathnam);
//document.write("</p>");
//document.write("<p>");
//document.write(has);
//document.write("</p>");
//document.write("<p>");
//document.write(searc);
//document.write("</p>");

getQueryParams(searc);
}

function getQueryParams(qs) { //expresion regular para dividir el query del URL
    qs = qs.split("+").join(" "); //cambia + por espacio
	qs = qs.substring(0, qs.length - 23) //borrar  Content-Type: text/html
	var contador=0;
    var params = {}, tokens,
        re = /[?&]?([^=]+)=([^&]*)()/g;
	document.write("<table class=\"table\" >");
	document.write("<td>");
	document.write("<div class=\"list-group\">");
	document.write("<a href=\"#\" class=\"list-group-item active\">");
    document.write("Nombre</a>");
	document.write("<td><a href=\"#\" class=\"list-group-item active\">");
    document.write("IP</a></td>");
	document.write("<td><a href=\"#\" class=\"list-group-item active\">");
    document.write("puerto</a></td></tr><tr>");
	while (tokens = re.exec(qs)) {
        params[decodeURIComponent(tokens[1])]
            = decodeURIComponent(tokens[2]);
			document.write("<td>")
			//document.write(tokens[1]);
			document.write("<a href=\"#\" class=\"list-group-item\">"+tokens[2]+"</a>");
			contador=contador+1;
			if((contador%3)==0){
				document.write("</tr><tr>");
				}		
    }
	document.write("</div>");
	document.write("</td>");
	document.write("</table>");
    return params;
}
</script>
  <h1 class="text-left">Contactos</h1>
	<script>getLocation(headers);</script>
	<button type="button" class="btn btn-default" onclick="window.location.href='index.htm'">Nuevo contacto</button>
  </body>
</html>